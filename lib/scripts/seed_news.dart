import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_core/firebase_core.dart';

Future<void> seedNewsData() async {
  final firestore = FirebaseFirestore.instance;

  final newsData = [
    {
      'id': 'news_001',
      'title': 'เตือนภัยพิบัติน้ำท่วมฉับพลันภาคใต้',
      'content': 'กรมอุตุนิยมวิทยาประกาศเตือนประชาชนในพื้นที่ภาคใต้ให้ระวังน้ำท่วมฉับพลันและน้ำป่าไหลหลากในช่วง 1-3 วันนี้ เนื่องจากมีฝนตกหนักต่อเนื่อง โดยเฉพาะในจังหวัดนครศรีธรรมราช สุราษฎร์ธานี และพัทลุง ขอให้ประชาชนติดตามประกาศเตือนภัยอย่างใกล้ชิด และเตรียมพร้อมอพยพหากจำเป็น',
      'date': DateTime.now().subtract(const Duration(hours: 5)),
    },
    {
      'id': 'news_002',
      'title': 'ปภ.เตรียมพร้อมรับมือภัยแล้งปี 2567',
      'content': 'กรมป้องกันและบรรเทาสาธารณภัย (ปภ.) เตรียมความพร้อมรับมือสถานการณ์ภัยแล้งปี 2567 ที่คาดว่าจะรุนแรงกว่าปีที่ผ่านมา จัดชุดเคลื่อนที่เร็วพร้อมรถบรรทุกน้ำกว่า 500 คัน กระจายไปยังพื้นที่เสี่ยงภัยทั่วประเทศ ขอให้ประชาชนใช้น้ำอย่างประหยัด และแจ้งขอความช่วยเหลือได้ที่สายด่วน 1784 ตลอด 24 ชั่วโมง',
      'date': DateTime.now().subtract(const Duration(days: 2)),
    },
    {
      'id': 'news_003',
      'title': 'เตือนภัยกระแสไฟฟ้าลัดวงจรในช่วงฤดูฝน',
      'content': 'การไฟฟ้าส่วนภูมิภาคเตือนประชาชนระวังอันตรายจากกระแสไฟฟ้าลัดวงจรในช่วงฤดูฝน แนะให้ตรวจสอบอุปกรณ์ไฟฟ้า สายไฟ และเต้ารับภายในบ้านว่ามีความเสียหายหรือเปียกน้ำหรือไม่ หากพบความผิดปกติ ให้รีบแจ้งช่างผู้เชี่ยวชาญมาตรวจสอบทันที อย่าซ่อมแซมเองเด็ดขาด เพื่อป้องกันอันตรายจากไฟฟ้าดูดและไฟไหม้',
      'date': DateTime.now().subtract(const Duration(days: 5)),
    },
    {
      'id': 'news_004',
      'title': 'โรคไข้เลือดออกระบาดหนักในหลายจังหวัด',
      'content': 'กระทรวงสาธารณสุขเผยสถานการณ์โรคไข้เลือดออกระบาดหนักใน 10 จังหวัด โดยเฉพาะภาคเหนือและภาคตะวันออกเฉียงเหนือ มีผู้ป่วยสะสมกว่า 20,000 ราย เสียชีวิตแล้ว 28 ราย ขอความร่วมมือประชาชนทำลายแหล่งเพาะพันธุ์ยุงลาย และหากมีอาการไข้สูง ปวดศีรษะ คลื่นไส้ ให้รีบไปพบแพทย์ทันที',
      'date': DateTime.now().subtract(const Duration(days: 3)),
    },
    {
      'id': 'news_005',
      'title': 'คำแนะนำการเอาตัวรอดจากเหตุไฟไหม้ในอาคารสูง',
      'content': 'กรมป้องกันและบรรเทาสาธารณภัยแนะนำวิธีเอาตัวรอดจากเหตุไฟไหม้ในอาคารสูง ดังนี้ 1. ใช้ผ้าชุบน้ำปิดจมูกป้องกันการสำลักควัน 2. ห้ามใช้ลิฟท์โดยเด็ดขาด 3. คลานต่ำเพื่อหลีกเลี่ยงควันไฟ 4. หากติดอยู่ในห้อง ให้ปิดประตูและใช้ผ้าอุดตามช่องว่าง ราดน้ำที่ประตูเพื่อป้องกันความร้อน 5. หากออกทางประตูไม่ได้ ให้โบกผ้าขาวที่หน้าต่างเพื่อขอความช่วยเหลือ',
      'date': DateTime.now().subtract(const Duration(days: 7)),
    },
    {
      'id': 'news_006',
      'title': 'แนะวิธีดูแลสุขภาพในช่วงหน้าร้อน',
      'content': 'กรมอนามัยแนะวิธีดูแลสุขภาพในช่วงหน้าร้อน ดังนี้ 1. ดื่มน้ำสะอาดอย่างน้อยวันละ 8 แก้ว 2. หลีกเลี่ยงอยู่กลางแจ้งในช่วงเวลา 11.00-15.00 น. 3. สวมเสื้อผ้าหลวม ระบายอากาศได้ดี 4. ทาครีมกันแดด 5. สังเกตอาการผิดปกติของร่างกาย เช่น เวียนศีรษะ คลื่นไส้ ผิวแห้ง ไม่มีเหงื่อ ซึ่งอาจเป็นสัญญาณของโรคลมแดด ควรรีบเข้าที่ร่ม ดื่มน้ำ และพบแพทย์โดยด่วน',
      'date': DateTime.now().subtract(const Duration(days: 10)),
    }
  ];

  try {
    // การบันทึกข้อมูล DateTime ลง Firestore จะถูกแปลงเป็น Timestamp โดยอัตโนมัติ
    // ซึ่งตอนอ่านข้อมูลกลับมาจะต้องแปลงกลับเป็น DateTime
    for (var item in newsData) {
      await firestore.collection('news').doc(item['id'] as String?).set({
        'title': item['title'],
        'content': item['content'],
        'date': item['date'],
      });
      print('Added ${item['title']} to Firestore - Date: ${item['date']}');
    }
    print('News data seeding completed.');
  } catch (e) {
    print('Error during news data seeding: $e');
  }
}